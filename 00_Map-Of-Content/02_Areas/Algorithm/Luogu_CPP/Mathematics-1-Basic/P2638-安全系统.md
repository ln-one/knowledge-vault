---
tags:
  - Knowledge/Algorithm
  - Knowledge/Algorithms/Math
created: 2025-09-16
author:
  - ln1
status: In Progress
---
## Description
有 n 个储存区，每个最多存放两种不同的信号（0 或 1），但可以为空。现有 a 个 0 信号和 b 个 1 信号，信号可以不全部使用。每种不同的储存方式会生成一种密码。给定 n, a, b，求不同储存方案的总数。
### Example:  
Input: 
```
2 1 1
```

Output: 
```
9
```
## Question Link

[P2638 安全系统 - 洛谷](https://www.luogu.com.cn/problem/P2638)
## Approach

- 这道题看上去和集合很像，那么有n个盒子，每个盒子可以不放，可以0，1都放。
- 限制条件：0的总数<=a ，1的总数<=b。意思就是我有a个0，那么我就分别用(a+1)种情况：我可以在n个储存区中放0个，或是1个...n个0，然后1也是如此。
- 而且0、1的储存是独立的。
![[Pasted image 20250916203005.png]]
- 因为0、1的储存实际上是独立的，那么我们可以将这两种情况的情况数进行相乘，因而：
![[Pasted image 20250916203625.png]]
- 那么现在研究的中心在于g(n，k)：我有k个球，我要把它分成n份。但是1份里可以为空。
- 隔板法是：1份里不可以为空，有k份，则一定有k-1个空隙；要分成n份，那么一定要有n-1块隔板。![[Pasted image 20250916205430.png]]
- 现在要解决的情况是盒子可以分不到球。这样我们通过一步化归，转换为上面的情况：添加 n 个球，使每个盒子至少有一个球。这样分完后只要将每个盒子多拿的一个球收回，便回到原情况了。于是得到方案数![[Pasted image 20250916205752.png]]
- ![[Pasted image 20250916205821.png]]
核心代码：
```cpp
for(int i = 0; i <= a; i++)
    for(int j = 0; j <= b; j++)
        ans += comb[n+i-1][n-1] * comb[n+j-1][n-1];
```
comb是组合数C(n,k)的计算函数，预处理的杨辉三角，参见：[[P2822-组合数问题]]。那么
```cpp
void init_comb(int maxn) {
    for (int i = 0; i <= maxn; i++) {
        comb[i][0] = comb[i][i] = 1;
        for (int j = 1; j < i; j++) {
            comb[i][j] = comb[i-1][j-1] + comb[i-1][j];
        }
    }
}
```
## Implementation

```cpp

#include <iostream>

using namespace std;

const int MAXN = 101;

int n, a, b;
unsigned long long comb[MAXN][MAXN];

void init_comb(int maxn) {
  for (int i = 0; i <= maxn; i++) {
    comb[i][0] = comb[i][i] = 1;
    for (int j = 1; j < i; j++) {
      comb[i][j] = comb[i - 1][j - 1] + comb[i - 1][j];
    }
  }
}
int main() {
  cin >> n >> a >> b;
  init_comb(n + max(a, b));
  unsigned long long ans = 0;
  for (int i = 0; i <= a; i++) {
    for (int j = 0; j <= b; j++) {
      ans += comb[n + i - 1][n - 1] * comb[n + j - 1][n - 1];
    }
  }
  cout << ans << endl;
  return 0;
}

```

## Analysis
这题是比较复杂的数学问题，主要是高中的组合的知识，从中我们可以看到杨辉三角还是应用十分广泛的，参见[[P2822-组合数问题]]