# Linux内核分析

## Hu Xiaopeng

```
xphu@swjtu.edu.cn
```
School of Computing and Artificial Intelligence
SWJTU, Chengdu, Sichuan


### 参考书

❑ 罗秋明. Linux技术内幕, 清华大学出版社,
2017.
❑ 毛德操, 胡希明. LINUX内核源代码情景分析(上
册)，浙江大学出版社， 2001.
❑ Robert Love(陈莉君, 康华译). Linux内核设计与
实现(3rd Edition), 机械工业出版社, 2011.
❑ 于渊. Orange's: 一个操作系统的实现, 电子工业
出版社, 2009
❑ Richard Stevens, Stephen Rago. Advanced
Programming in the UNIX Environment (3rd
Edition), 机械工业出版社, 2016.


❑ 平时作业(20%)

❑ 考勤(10%)

❑ 期中考试(10%)

❑ 期末考试(60%)

### 课程考核


### 先前课程

#### ❑ 操作系统原理

#### ❑ 数据结构

#### ❑ 微机原理及接口

#### ❑ C语言、汇编语言


❑ 操作系统 – 重点内容是操作系统的基本概念
、原理、算法

❑ Linux内核分析 – 在源代码层面学习Linux操作
系统的编程接口和实现
➢ 看代码
➢ 编代码

### 操作系统和Linux内核分析


### 课程主要内容

#### ❑ IA- 32 保护模式和鲲鹏处理器

#### ❑ ELF可执行文件结构

❑ 进程影像(Process Image)

❑ 物理存储描述及地址映射

❑ 外部中断、异常初始化和系统调用过程

❑ 进程控制相关系统调用(创建、执行其它
程序、终止)


❑ Why do many programs can be run in a computer
with uniprocessor simultaneously?
❑ How can we ran several instances of a program？
❑ Small main memory, big programs?
❑ If we ran a program with bugs, other programs will
be destroyed?
❑ Why does a program developed on one computer
can be run on another computer?
❑ How does a program save the running results？
❑ How does a computer manage a lot of devices ？

### 操作系统原理回顾(1)


### Process (进程) – Interleaving/Switch

```
Schedule
CPU
```
```
Memory
Allocation
```
```
File System
```
```
Input
Output
```
```
Process
```

### Trace of Processes (1)


### Trace of Processes (2)


### Trace of Processes (3)


### 操作系统原理回顾(2)


### 操作系统原理回顾(3)


## Switch Between Two Processes

❑ Save context of processor including program
counter and other registers
❑ Update the process control block of the
process that is currently in the Running state
❑ Move process control block to appropriate
queue – ready; blocked;
❑ Select another process for execution
❑ Update the process control block of the
process selected
❑ Update memory-management data structures
❑ Restore context of the selected process


## UNIX操作系统的历史(1)

❑ 1970 - 1971 年，Ken Thompson和Dennis
Ritchie在Bell实验室发明了Unix

❑ 1974 年，Ken Thompson和Dennis
Ritchie在《Communicaiton of ACM》发
表文章《 The UNIX Time-Sharing
System 》，对外公开Unix


## UNIX操作系统的历史(2)


## MINIX操作系统的历史

❑ 1987 年，Andrew S. Tanenbaum设计了
MINIX操作系统

❑ MINIX是一个教学用操作系统

❑ Andrew S. Tanenbaum 在《操作系统：
设计与实现》中详细介绍了MINIX操作系
统的实现

❑ Less is more


## LINUX操作系统的历史

❑ 1991 年Linus Torvalds在Intel 80386计算
机上开发了LINUX，并利用Internet发布
其源代码

❑ LINUX采用GNU协议，源代码开源

❑ LINUX是目前应用最广泛的服务器操作系
统、嵌入式操作系统


## LINUX内核版本和发行版本

#### ❑ LINUX内核版本即LINUX操作系统核心对

```
应的版本，由Linus Torvalds及团队负责
维护
```
❑ LINUX发行版本由其它厂商、社区进行维
护，是在LINUX内核版本的基础上，配套
用户界面、各种支持软件，以便最终用
户更好地使用LINUX操作系统


## openEuler开源社区(1)

❑ EulerOS是华为公司开发的一款基于Linux内核
的服务器操作系统，支持x86和ARM(Advanced
RISC Machine)等多种处理器架构，适用于数据
库、大数据、云计算、人工智能等应用场景；
❑ 在近 10 年的发展中，EulerOS成功支持了华为
各种产品解决方案，以安全、稳定、高效被业
界认可

❑ 随着云计算的兴起和鲲鹏芯片的发展，
EulerOS成为与鲲鹏芯片配套最合适的软件基
础设施


## openEuler开源社区(2)

❑ 为推动鲲鹏生态的发展， 2019 年底EulerOS被
正式推送开源社区，命名为openEuler。所有
开发者、企业、商业组织都可以使openEuler
社区版本，也可以基于社区版本发布自己二次
开发的操作系统版本。
❑ https://openeuler.org/
❑ https://gitee.com/openeuler/


## openEuler发展历程


## openEuler与其它发行版本


