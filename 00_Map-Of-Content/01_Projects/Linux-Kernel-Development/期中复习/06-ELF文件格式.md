# 06 - ELFæ–‡ä»¶æ ¼å¼

> ğŸ’¡ **æœ¬ç« ç›®æ ‡**ï¼šç†è§£ELFæ–‡ä»¶çš„ç»“æ„ï¼ŒæŒæ¡é“¾æ¥å’ŒåŠ è½½çš„åŸºæœ¬æ¦‚å¿µ

> âš ï¸ **é‡è¦ç¨‹åº¦**ï¼šâ­â­â­ï¼ˆç†è§£ç»“æ„ï¼Œä¼šåˆ†æï¼‰

---

## ğŸ“– ç›®å½•
1. [ä»€ä¹ˆæ˜¯ELF](#ä»€ä¹ˆæ˜¯elf)
2. [ELFæ–‡ä»¶å¸ƒå±€](#elfæ–‡ä»¶å¸ƒå±€)
3. [ELF Header](#elf-header)
4. [Program Header](#program-header)
5. [Section Header](#section-header)
6. [é“¾æ¥å’Œé‡å®šä½](#é“¾æ¥å’Œé‡å®šä½)
7. [ç³»ç»Ÿè°ƒç”¨](#ç³»ç»Ÿè°ƒç”¨)

---

## ä»€ä¹ˆæ˜¯ELFï¼Ÿ

### ğŸ¯ ELFç®€ä»‹

**ELF (Executable and Linkable Format)** = å¯æ‰§è¡Œå¯é“¾æ¥æ ¼å¼

```
ELFæ˜¯ä»€ä¹ˆï¼Ÿ
â”œâ”€ Unix/Linuxç³»ç»Ÿçš„æ ‡å‡†äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼
â”œâ”€ ç”¨äºå¯æ‰§è¡Œæ–‡ä»¶ã€ç›®æ ‡æ–‡ä»¶ã€å…±äº«åº“ã€æ ¸å¿ƒè½¬å‚¨
â”œâ”€ éå¸¸çµæ´»å’Œå¯æ‰©å±•
â””â”€ ä¸ç»‘å®šåˆ°ç‰¹å®šå¤„ç†å™¨æˆ–æ¶æ„
```

### ğŸ“ ELFæ–‡ä»¶ç±»å‹

| ç±»å‹ | è¯´æ˜ | æ‰©å±•å | e_type |
|------|------|--------|--------|
| **å¯é‡å®šä½æ–‡ä»¶** | ç¼–è¯‘åæœªé“¾æ¥çš„ç›®æ ‡æ–‡ä»¶ | .o | 0x0001 |
| **å¯æ‰§è¡Œæ–‡ä»¶** | å¯ä»¥ç›´æ¥è¿è¡Œçš„ç¨‹åº | æ— æˆ–.out | 0x0002 |
| **å…±äº«ç›®æ ‡æ–‡ä»¶** | åŠ¨æ€é“¾æ¥åº“ | .so | 0x0003 |
| **æ ¸å¿ƒè½¬å‚¨æ–‡ä»¶** | ç¨‹åºå´©æºƒæ—¶çš„å†…å­˜å¿«ç…§ | core | 0x0004 |

### ğŸ”„ ä»æºä»£ç åˆ°å¯æ‰§è¡Œæ–‡ä»¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  foo.asm (æ±‡ç¼–æºä»£ç )                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“ nasm -f elf
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  foo.o (å¯é‡å®šä½æ–‡ä»¶ï¼ŒELFæ ¼å¼)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  bar.c (Cæºä»£ç )                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“ gcc -c
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  bar.o (å¯é‡å®šä½æ–‡ä»¶ï¼ŒELFæ ¼å¼)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“ ld (é“¾æ¥å™¨)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  foobar (å¯æ‰§è¡Œæ–‡ä»¶ï¼ŒELFæ ¼å¼)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“ åŠ è½½å™¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å†…å­˜ä¸­çš„è¿›ç¨‹                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ELFæ–‡ä»¶å¸ƒå±€

### ğŸ“Š ELFæ–‡ä»¶çš„ç»„æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ELF Header                           â”‚ â† æ–‡ä»¶å¤´ï¼ˆå¿…é¡»ï¼‰
â”‚  (52å­—èŠ‚ï¼Œ32ä½ç³»ç»Ÿ)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Program Header Table                 â”‚ â† ç¨‹åºå¤´è¡¨ï¼ˆå¯é€‰ï¼‰
â”‚  (æè¿°æ®µï¼Œç”¨äºè¿è¡Œæ—¶)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  .text (ä»£ç æ®µ)                       â”‚
â”‚  .data (æ•°æ®æ®µ)                       â”‚
â”‚  .bss  (æœªåˆå§‹åŒ–æ•°æ®)                 â”‚ â† å„ä¸ªèŠ‚
â”‚  .rodata (åªè¯»æ•°æ®)                   â”‚
â”‚  ...                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Section Header Table                 â”‚ â† èŠ‚å¤´è¡¨ï¼ˆå¯é€‰ï¼‰
â”‚  (æè¿°èŠ‚ï¼Œç”¨äºé“¾æ¥æ—¶)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ” æ®µ(Segment) vs èŠ‚(Section)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ®µ (Segment)                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ“ è¿è¡Œæ—¶æ¦‚å¿µ                                            â”‚
â”‚  âœ“ ç”±Program Header Tableæè¿°                           â”‚
â”‚  âœ“ ç”¨äºåŠ è½½åˆ°å†…å­˜                                        â”‚
â”‚  âœ“ ä¸€ä¸ªæ®µå¯ä»¥åŒ…å«å¤šä¸ªèŠ‚                                  â”‚
â”‚                                                         â”‚
â”‚  ä¾‹å¦‚ï¼š                                                  â”‚
â”‚  å¯æ‰§è¡Œæ®µ = .text + .rodata                              â”‚
â”‚  å¯å†™æ®µ   = .data + .bss                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  èŠ‚ (Section)                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ“ é“¾æ¥æ—¶æ¦‚å¿µ                                            â”‚
â”‚  âœ“ ç”±Section Header Tableæè¿°                           â”‚
â”‚  âœ“ ç”¨äºé“¾æ¥å’Œé‡å®šä½                                      â”‚
â”‚  âœ“ æ›´ç»†ç²’åº¦çš„åˆ’åˆ†                                        â”‚
â”‚                                                         â”‚
â”‚  ä¾‹å¦‚ï¼š                                                  â”‚
â”‚  .text    : ä»£ç                                          â”‚
â”‚  .data    : å·²åˆå§‹åŒ–æ•°æ®                                 â”‚
â”‚  .bss     : æœªåˆå§‹åŒ–æ•°æ®                                 â”‚
â”‚  .rodata  : åªè¯»æ•°æ®                                     â”‚
â”‚  .symtab  : ç¬¦å·è¡¨                                       â”‚
â”‚  .strtab  : å­—ç¬¦ä¸²è¡¨                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> ğŸ’¡ **ç®€å•ç†è§£**ï¼š
> - **èŠ‚**ï¼šç¼–è¯‘å™¨å’Œé“¾æ¥å™¨å…³å¿ƒçš„ï¼ˆé“¾æ¥æ—¶ï¼‰
> - **æ®µ**ï¼šåŠ è½½å™¨å’Œæ“ä½œç³»ç»Ÿå…³å¿ƒçš„ï¼ˆè¿è¡Œæ—¶ï¼‰

---

## ELF Header

### ğŸ“Š ELF Headerç»“æ„ï¼ˆ52å­—èŠ‚ï¼‰

```c
typedef struct {
    unsigned char e_ident[16];    // é­”æ•°å’Œå…¶ä»–ä¿¡æ¯
    Elf32_Half    e_type;         // æ–‡ä»¶ç±»å‹
    Elf32_Half    e_machine;      // ä½“ç³»ç»“æ„
    Elf32_Word    e_version;      // æ–‡ä»¶ç‰ˆæœ¬
    Elf32_Addr    e_entry;        // ç¨‹åºå…¥å£åœ°å€
    Elf32_Off     e_phoff;        // ç¨‹åºå¤´è¡¨åç§»
    Elf32_Off     e_shoff;        // èŠ‚å¤´è¡¨åç§»
    Elf32_Word    e_flags;        // å¤„ç†å™¨ç‰¹å®šæ ‡å¿—
    Elf32_Half    e_ehsize;       // ELF Headerå¤§å°
    Elf32_Half    e_phentsize;    // ç¨‹åºå¤´è¡¨é¡¹å¤§å°
    Elf32_Half    e_phnum;        // ç¨‹åºå¤´è¡¨é¡¹æ•°ç›®
    Elf32_Half    e_shentsize;    // èŠ‚å¤´è¡¨é¡¹å¤§å°
    Elf32_Half    e_shnum;        // èŠ‚å¤´è¡¨é¡¹æ•°ç›®
    Elf32_Half    e_shstrndx;     // èŠ‚åå­—ç¬¦ä¸²è¡¨ç´¢å¼•
} Elf32_Ehdr;
```

### ğŸ” å…³é”®å­—æ®µè¯¦è§£

#### e_ident[16] - é­”æ•°

```
åç§»  å†…å®¹              è¯´æ˜
0-3   0x7F 'E' 'L' 'F'  ELFé­”æ•°
4     1æˆ–2              1=32ä½ï¼Œ2=64ä½
5     1æˆ–2              1=å°ç«¯ï¼Œ2=å¤§ç«¯
6     1                 ELFç‰ˆæœ¬
7-15  0                 å¡«å……
```

**æ£€æŸ¥æ˜¯å¦ä¸ºELFæ–‡ä»¶**ï¼š
```c
if (header[0] == 0x7F &&
    header[1] == 'E' &&
    header[2] == 'L' &&
    header[3] == 'F') {
    // æ˜¯ELFæ–‡ä»¶
}
```

#### e_type - æ–‡ä»¶ç±»å‹

```
0x0000  ET_NONE    æœªçŸ¥ç±»å‹
0x0001  ET_REL     å¯é‡å®šä½æ–‡ä»¶ (.o)
0x0002  ET_EXEC    å¯æ‰§è¡Œæ–‡ä»¶
0x0003  ET_DYN     å…±äº«ç›®æ ‡æ–‡ä»¶ (.so)
0x0004  ET_CORE    æ ¸å¿ƒè½¬å‚¨æ–‡ä»¶
```

#### e_machine - ä½“ç³»ç»“æ„

```
0x0003  EM_386     Intel 80386
0x003E  EM_X86_64  AMD x86-64
0x0028  EM_ARM     ARM
0x00B7  EM_AARCH64 ARM 64ä½
```

#### e_entry - ç¨‹åºå…¥å£åœ°å€

```
å¯æ‰§è¡Œæ–‡ä»¶ï¼šç¨‹åºå¼€å§‹æ‰§è¡Œçš„è™šæ‹Ÿåœ°å€
å¯é‡å®šä½æ–‡ä»¶ï¼š0ï¼ˆæ²¡æœ‰å…¥å£ç‚¹ï¼‰
å…±äº«åº“ï¼šé€šå¸¸ä¸º0
```

### ğŸ“ ç¤ºä¾‹ï¼šfoobarçš„ELF Header

```
å­—æ®µ            å€¼          è¯´æ˜
e_ident[0-3]   7F 45 4C 46  ELFé­”æ•°
e_ident[4]     01           32ä½
e_ident[5]     01           å°ç«¯
e_type         0x0002       å¯æ‰§è¡Œæ–‡ä»¶
e_machine      0x0003       Intel 80386
e_version      0x00000001   ç‰ˆæœ¬1
e_entry        0x08048080   å…¥å£åœ°å€
e_phoff        0x00000034   ç¨‹åºå¤´è¡¨åœ¨åç§»52å¤„
e_shoff        0x00000198   èŠ‚å¤´è¡¨åœ¨åç§»408å¤„
e_flags        0x00000000   æ— ç‰¹æ®Šæ ‡å¿—
e_ehsize       0x0034       ELF Headerå¤§å°52å­—èŠ‚
e_phentsize    0x0020       ç¨‹åºå¤´è¡¨é¡¹32å­—èŠ‚
e_phnum        0x0002       2ä¸ªç¨‹åºå¤´è¡¨é¡¹
e_shentsize    0x0028       èŠ‚å¤´è¡¨é¡¹40å­—èŠ‚
e_shnum        0x0007       7ä¸ªèŠ‚å¤´è¡¨é¡¹
e_shstrndx     0x0006       èŠ‚åå­—ç¬¦ä¸²è¡¨æ˜¯ç¬¬6ä¸ªèŠ‚
```

---

## Program Header

### ğŸ“Š Program Headerç»“æ„ï¼ˆ32å­—èŠ‚ï¼‰

```c
typedef struct {
    Elf32_Word p_type;      // æ®µç±»å‹
    Elf32_Off  p_offset;    // æ®µåœ¨æ–‡ä»¶ä¸­çš„åç§»
    Elf32_Addr p_vaddr;     // æ®µçš„è™šæ‹Ÿåœ°å€
    Elf32_Addr p_paddr;     // æ®µçš„ç‰©ç†åœ°å€(ä¿ç•™)
    Elf32_Word p_filesz;    // æ®µåœ¨æ–‡ä»¶ä¸­çš„é•¿åº¦
    Elf32_Word p_memsz;     // æ®µåœ¨å†…å­˜ä¸­çš„é•¿åº¦
    Elf32_Word p_flags;     // æ®µæ ‡å¿—
    Elf32_Word p_align;     // æ®µå¯¹é½
} Elf32_Phdr;
```

### ğŸ” å­—æ®µè¯¦è§£

#### p_type - æ®µç±»å‹

```
0x00000000  PT_NULL     æœªä½¿ç”¨
0x00000001  PT_LOAD     å¯åŠ è½½æ®µ
0x00000002  PT_DYNAMIC  åŠ¨æ€é“¾æ¥ä¿¡æ¯
0x00000003  PT_INTERP   è§£é‡Šå™¨è·¯å¾„
0x00000004  PT_NOTE     è¾…åŠ©ä¿¡æ¯
0x00000006  PT_PHDR     ç¨‹åºå¤´è¡¨æœ¬èº«
```

#### p_flags - æ®µæ ‡å¿—

```
0x1  PF_X  å¯æ‰§è¡Œ
0x2  PF_W  å¯å†™
0x4  PF_R  å¯è¯»

å¸¸è§ç»„åˆï¼š
0x5 (PF_R | PF_X)  å¯è¯»å¯æ‰§è¡Œï¼ˆä»£ç æ®µï¼‰
0x6 (PF_R | PF_W)  å¯è¯»å¯å†™ï¼ˆæ•°æ®æ®µï¼‰
```

#### p_filesz vs p_memsz

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  p_fileszï¼šæ®µåœ¨æ–‡ä»¶ä¸­å ç”¨çš„å­—èŠ‚æ•°    â”‚
â”‚  p_memszï¼šæ®µåœ¨å†…å­˜ä¸­å ç”¨çš„å­—èŠ‚æ•°     â”‚
â”‚                                     â”‚
â”‚  å¦‚æœ p_memsz > p_fileszï¼š          â”‚
â”‚  å¤šä½™éƒ¨åˆ†ç”¨0å¡«å……ï¼ˆå¦‚.bssæ®µï¼‰         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¾‹å¦‚ï¼š
.dataæ®µï¼š
  p_filesz = 100  (æ–‡ä»¶ä¸­æœ‰100å­—èŠ‚æ•°æ®)
  p_memsz  = 100  (å†…å­˜ä¸­ä¹Ÿæ˜¯100å­—èŠ‚)

.bssæ®µï¼š
  p_filesz = 0    (æ–‡ä»¶ä¸­ä¸å ç©ºé—´)
  p_memsz  = 200  (å†…å­˜ä¸­éœ€è¦200å­—èŠ‚ï¼Œå…¨éƒ¨æ¸…é›¶)
```

### ğŸ“ ç¤ºä¾‹ï¼šfoobarçš„Program Header

```
Program Header 0:
  p_type    = 0x00000001  (PT_LOADï¼Œå¯åŠ è½½æ®µ)
  p_offset  = 0x00000000  (ä»æ–‡ä»¶å¼€å¤´)
  p_vaddr   = 0x08048000  (åŠ è½½åˆ°0x08048000)
  p_paddr   = 0x08048000  (ç‰©ç†åœ°å€ï¼Œé€šå¸¸å¿½ç•¥)
  p_filesz  = 0x0000000D  (æ–‡ä»¶ä¸­13å­—èŠ‚)
  p_memsz   = 0x0000010D  (å†…å­˜ä¸­269å­—èŠ‚)
  p_flags   = 0x00000005  (å¯è¯»å¯æ‰§è¡Œ)
  p_align   = 0x00001000  (4KBå¯¹é½)

Program Header 1:
  p_type    = 0x00000001  (PT_LOADï¼Œå¯åŠ è½½æ®µ)
  p_offset  = 0x00000100  (ä»æ–‡ä»¶åç§»256å¤„)
  p_vaddr   = 0x08049000  (åŠ è½½åˆ°0x08049000)
  p_paddr   = 0x08049000
  p_filesz  = 0x00000008  (æ–‡ä»¶ä¸­8å­—èŠ‚)
  p_memsz   = 0x00000008  (å†…å­˜ä¸­8å­—èŠ‚)
  p_flags   = 0x00000006  (å¯è¯»å¯å†™)
  p_align   = 0x00001000  (4KBå¯¹é½)
```

---

## Section Header

### ğŸ“Š Section Headerç»“æ„ï¼ˆ40å­—èŠ‚ï¼‰

```c
typedef struct {
    Elf32_Word sh_name;       // èŠ‚å(å­—ç¬¦ä¸²è¡¨ç´¢å¼•)
    Elf32_Word sh_type;       // èŠ‚ç±»å‹
    Elf32_Word sh_flags;      // èŠ‚æ ‡å¿—
    Elf32_Addr sh_addr;       // èŠ‚çš„è™šæ‹Ÿåœ°å€
    Elf32_Off  sh_offset;     // èŠ‚åœ¨æ–‡ä»¶ä¸­çš„åç§»
    Elf32_Word sh_size;       // èŠ‚çš„å¤§å°
    Elf32_Word sh_link;       // é“¾æ¥åˆ°å…¶ä»–èŠ‚
    Elf32_Word sh_info;       // é™„åŠ ä¿¡æ¯
    Elf32_Word sh_addralign;  // èŠ‚å¯¹é½
    Elf32_Word sh_entsize;    // è¡¨é¡¹å¤§å°(å¦‚æœèŠ‚æ˜¯è¡¨)
} Elf32_Shdr;
```

### ğŸ” å¸¸è§èŠ‚ç±»å‹

| èŠ‚å | sh_type | è¯´æ˜ |
|------|---------|------|
| **.text** | SHT_PROGBITS | å¯æ‰§è¡Œä»£ç  |
| **.data** | SHT_PROGBITS | å·²åˆå§‹åŒ–æ•°æ® |
| **.bss** | SHT_NOBITS | æœªåˆå§‹åŒ–æ•°æ®ï¼ˆä¸å æ–‡ä»¶ç©ºé—´ï¼‰ |
| **.rodata** | SHT_PROGBITS | åªè¯»æ•°æ® |
| **.symtab** | SHT_SYMTAB | ç¬¦å·è¡¨ |
| **.strtab** | SHT_STRTAB | å­—ç¬¦ä¸²è¡¨ |
| **.shstrtab** | SHT_STRTAB | èŠ‚åå­—ç¬¦ä¸²è¡¨ |
| **.rel.text** | SHT_REL | ä»£ç æ®µé‡å®šä½ä¿¡æ¯ |

### ğŸ“ èŠ‚æ ‡å¿—

```
SHF_WRITE     (0x1)  å¯å†™
SHF_ALLOC     (0x2)  è¿è¡Œæ—¶éœ€è¦åˆ†é…å†…å­˜
SHF_EXECINSTR (0x4)  å¯æ‰§è¡Œ

å¸¸è§ç»„åˆï¼š
.text:   SHF_ALLOC | SHF_EXECINSTR  (å¯æ‰§è¡Œ)
.data:   SHF_WRITE | SHF_ALLOC      (å¯è¯»å†™)
.rodata: SHF_ALLOC                  (åªè¯»)
.bss:    SHF_WRITE | SHF_ALLOC      (å¯è¯»å†™)
```

---

## é“¾æ¥å’Œé‡å®šä½

### ğŸ”„ é“¾æ¥è¿‡ç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. ç¬¦å·è§£æ (Symbol Resolution)                         â”‚
â”‚     æ‰¾åˆ°æ‰€æœ‰æœªå®šä¹‰ç¬¦å·çš„å®šä¹‰                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  foo.o:                                                  â”‚
â”‚    å®šä¹‰ï¼š_start, myprint                                 â”‚
â”‚    æœªå®šä¹‰ï¼šchoose                                        â”‚
â”‚                                                         â”‚
â”‚  bar.o:                                                  â”‚
â”‚    å®šä¹‰ï¼šchoose                                          â”‚
â”‚    æœªå®šä¹‰ï¼šmyprint                                       â”‚
â”‚                                                         â”‚
â”‚  é“¾æ¥åï¼šæ‰€æœ‰ç¬¦å·éƒ½æœ‰å®šä¹‰                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. é‡å®šä½ (Relocation)                                  â”‚
â”‚     ç¡®å®šç¬¦å·çš„æœ€ç»ˆåœ°å€ï¼Œä¿®æ”¹å¼•ç”¨                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é“¾æ¥å‰ï¼š                                                â”‚
â”‚    call choose    ; åœ°å€æœªçŸ¥                             â”‚
â”‚                                                         â”‚
â”‚  é“¾æ¥åï¼š                                                â”‚
â”‚    call 0x08048100  ; åœ°å€å·²ç¡®å®š                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“ é™æ€é“¾æ¥ vs åŠ¨æ€é“¾æ¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é™æ€é“¾æ¥ (Static Linking)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ“ ç¼–è¯‘æ—¶é“¾æ¥                                            â”‚
â”‚  âœ“ åº“ä»£ç å¤åˆ¶åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­                              â”‚
â”‚  âœ“ å¯æ‰§è¡Œæ–‡ä»¶è¾ƒå¤§                                        â”‚
â”‚  âœ“ è¿è¡Œæ—¶ä¸ä¾èµ–å¤–éƒ¨åº“                                    â”‚
â”‚  âœ“ æ›´æ–°åº“éœ€è¦é‡æ–°ç¼–è¯‘                                    â”‚
â”‚                                                         â”‚
â”‚  å‘½ä»¤ï¼š                                                  â”‚
â”‚  ld -static foo.o bar.o -o foobar                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åŠ¨æ€é“¾æ¥ (Dynamic Linking)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ“ è¿è¡Œæ—¶é“¾æ¥                                            â”‚
â”‚  âœ“ åº“ä»£ç ä¸å¤åˆ¶ï¼Œåªè®°å½•ä¾èµ–                              â”‚
â”‚  âœ“ å¯æ‰§è¡Œæ–‡ä»¶è¾ƒå°                                        â”‚
â”‚  âœ“ è¿è¡Œæ—¶éœ€è¦å…±äº«åº“(.so)                                 â”‚
â”‚  âœ“ æ›´æ–°åº“ä¸éœ€è¦é‡æ–°ç¼–è¯‘ç¨‹åº                              â”‚
â”‚  âœ“ å¤šä¸ªç¨‹åºå¯ä»¥å…±äº«åŒä¸€ä¸ªåº“                              â”‚
â”‚                                                         â”‚
â”‚  å‘½ä»¤ï¼š                                                  â”‚
â”‚  ld foo.o bar.o -o foobar                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ” é‡å®šä½çš„æœ¬è´¨

```
é‡å®šä½ = æŠŠé€»è¾‘åœ°å€è½¬æ¢ä¸ºå®é™…åœ°å€

ä¾‹å¦‚ï¼š
æºä»£ç ï¼š
  call choose

ç¼–è¯‘åï¼ˆfoo.oï¼‰ï¼š
  call 0x00000000    ; åœ°å€æœªçŸ¥ï¼Œéœ€è¦é‡å®šä½
  
é“¾æ¥åï¼ˆfoobarï¼‰ï¼š
  call 0x08048100    ; åœ°å€å·²ç¡®å®š
```

---

## ç³»ç»Ÿè°ƒç”¨

### ğŸ¯ ä»€ä¹ˆæ˜¯ç³»ç»Ÿè°ƒç”¨ï¼Ÿ

```
ç³»ç»Ÿè°ƒç”¨ = åº”ç”¨ç¨‹åºè¯·æ±‚æ“ä½œç³»ç»ŸæœåŠ¡çš„æ¥å£

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åº”ç”¨ç¨‹åº (Ring 3)                   â”‚
â”‚  â”œâ”€ ä¸èƒ½ç›´æ¥è®¿é—®ç¡¬ä»¶                 â”‚
â”‚  â”œâ”€ ä¸èƒ½ç›´æ¥æ“ä½œæ–‡ä»¶                 â”‚
â”‚  â””â”€ éœ€è¦é€šè¿‡ç³»ç»Ÿè°ƒç”¨è¯·æ±‚æœåŠ¡         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ int 0x80 (Linux)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ“ä½œç³»ç»Ÿå†…æ ¸ (Ring 0)               â”‚
â”‚  â”œâ”€ å¤„ç†ç³»ç»Ÿè°ƒç”¨                     â”‚
â”‚  â”œâ”€ è®¿é—®ç¡¬ä»¶                         â”‚
â”‚  â””â”€ è¿”å›ç»“æœ                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“‹ Linuxç³»ç»Ÿè°ƒç”¨çº¦å®š

**å‚æ•°ä¼ é€’**ï¼š
```
EAXï¼šç³»ç»Ÿè°ƒç”¨å·
EBXï¼šç¬¬1ä¸ªå‚æ•°
ECXï¼šç¬¬2ä¸ªå‚æ•°
EDXï¼šç¬¬3ä¸ªå‚æ•°
ESIï¼šç¬¬4ä¸ªå‚æ•°
EDIï¼šç¬¬5ä¸ªå‚æ•°

è¿”å›å€¼ï¼š
EAXï¼šè¿”å›å€¼ï¼ˆæˆåŠŸæˆ–é”™è¯¯ç ï¼‰
```

### ğŸ’» å¸¸ç”¨ç³»ç»Ÿè°ƒç”¨

#### sys_exit (1) - é€€å‡ºè¿›ç¨‹

```asm
mov eax, 1      ; sys_exit
mov ebx, 0      ; é€€å‡ºç 
int 0x80        ; ç³»ç»Ÿè°ƒç”¨
```

#### sys_write (4) - å†™æ–‡ä»¶

```asm
mov eax, 4      ; sys_write
mov ebx, 1      ; æ–‡ä»¶æè¿°ç¬¦(1=stdout)
mov ecx, msg    ; æ¶ˆæ¯åœ°å€
mov edx, len    ; æ¶ˆæ¯é•¿åº¦
int 0x80        ; ç³»ç»Ÿè°ƒç”¨
```

### ğŸ“ å®Œæ•´ç¤ºä¾‹

```asm
; foo.asm
extern choose

[section .data]
num1st dd 3
num2nd dd 4

[section .text]
global _start
global myprint

_start:
    push dword [num2nd]
    push dword [num1st]
    call choose         ; è°ƒç”¨Cå‡½æ•°
    add esp, 8          ; æ¸…ç†æ ˆ
    
    mov ebx, 0
    mov eax, 1          ; sys_exit
    int 0x80

; void myprint(char* msg, int len)
myprint:
    mov edx, [esp + 8]  ; len (ç¬¬2ä¸ªå‚æ•°)
    mov ecx, [esp + 4]  ; msg (ç¬¬1ä¸ªå‚æ•°)
    mov ebx, 1          ; stdout
    mov eax, 4          ; sys_write
    int 0x80
    ret
```

```c
// bar.c
void myprint(char* msg, int len);

int choose(int a, int b) {
    if (a >= b) {
        myprint("the 1st one\n", 13);
    } else {
        myprint("the 2nd one\n", 13);
    }
    return 0;
}
```

### ğŸ”§ ç¼–è¯‘å’Œé“¾æ¥

```bash
# ç¼–è¯‘æ±‡ç¼–æ–‡ä»¶
nasm -f elf foo.asm -o foo.o

# ç¼–è¯‘Cæ–‡ä»¶
gcc -c bar.c -o bar.o

# é“¾æ¥
ld -s foo.o bar.o -o foobar

# è¿è¡Œ
./foobar
# è¾“å‡ºï¼šthe 2nd one
```

### â“ ä¸ºä»€ä¹ˆä¸éœ€è¦æ‰“å¼€stdin/stdout/stderrï¼Ÿ

```
ç­”æ¡ˆï¼šå­è¿›ç¨‹ç»§æ‰¿çˆ¶è¿›ç¨‹çš„æ–‡ä»¶æè¿°ç¬¦

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Shell (çˆ¶è¿›ç¨‹)                      â”‚
â”‚  â”œâ”€ æ‰“å¼€äº†stdin (fd=0)               â”‚
â”‚  â”œâ”€ æ‰“å¼€äº†stdout (fd=1)              â”‚
â”‚  â””â”€ æ‰“å¼€äº†stderr (fd=2)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ fork + exec
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  foobar (å­è¿›ç¨‹)                     â”‚
â”‚  â”œâ”€ ç»§æ‰¿äº†stdin (fd=0)               â”‚
â”‚  â”œâ”€ ç»§æ‰¿äº†stdout (fd=1)              â”‚
â”‚  â””â”€ ç»§æ‰¿äº†stderr (fd=2)              â”‚
â”‚  â†’ å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ æœ¬ç« å°ç»“

### ELFæ–‡ä»¶ç»“æ„

```
ELF Header â†’ æè¿°æ•´ä¸ªæ–‡ä»¶
Program Header Table â†’ æè¿°æ®µï¼ˆè¿è¡Œæ—¶ï¼‰
Section Header Table â†’ æè¿°èŠ‚ï¼ˆé“¾æ¥æ—¶ï¼‰
```

### å…³é”®æ¦‚å¿µ

| æ¦‚å¿µ | è¯´æ˜ |
|------|------|
| **æ®µ** | è¿è¡Œæ—¶æ¦‚å¿µï¼Œç”¨äºåŠ è½½ |
| **èŠ‚** | é“¾æ¥æ—¶æ¦‚å¿µï¼Œç”¨äºé“¾æ¥ |
| **ç¬¦å·è§£æ** | æ‰¾åˆ°æœªå®šä¹‰ç¬¦å·çš„å®šä¹‰ |
| **é‡å®šä½** | ç¡®å®šç¬¦å·çš„æœ€ç»ˆåœ°å€ |
| **ç³»ç»Ÿè°ƒç”¨** | åº”ç”¨ç¨‹åºè¯·æ±‚OSæœåŠ¡çš„æ¥å£ |

### é‡è¦å­—æ®µ

```
ELF Header:
  e_entryï¼šç¨‹åºå…¥å£åœ°å€
  e_phoffï¼šç¨‹åºå¤´è¡¨åç§»
  e_shoffï¼šèŠ‚å¤´è¡¨åç§»

Program Header:
  p_vaddrï¼šæ®µçš„è™šæ‹Ÿåœ°å€
  p_fileszï¼šæ®µåœ¨æ–‡ä»¶ä¸­çš„å¤§å°
  p_memszï¼šæ®µåœ¨å†…å­˜ä¸­çš„å¤§å°
```

---

## âœ… è‡ªæˆ‘æ£€æŸ¥

- [ ] èƒ½è¯´å‡ºELFæ–‡ä»¶çš„ç»„æˆéƒ¨åˆ†
- [ ] èƒ½åŒºåˆ†æ®µå’ŒèŠ‚
- [ ] èƒ½è¯´å‡ºELF Headerçš„å…³é”®å­—æ®µ
- [ ] èƒ½è§£é‡Šp_fileszå’Œp_memszçš„åŒºåˆ«
- [ ] èƒ½è¯´å‡ºé“¾æ¥çš„ä¸¤ä¸ªä¸»è¦æ­¥éª¤
- [ ] èƒ½åŒºåˆ†é™æ€é“¾æ¥å’ŒåŠ¨æ€é“¾æ¥
- [ ] èƒ½å†™å‡ºç³»ç»Ÿè°ƒç”¨çš„æ±‡ç¼–ä»£ç 
- [ ] èƒ½è§£é‡Šä¸ºä»€ä¹ˆå­è¿›ç¨‹å¯ä»¥ç›´æ¥ä½¿ç”¨stdout

---

**ä¸‹ä¸€ç« **ï¼š[07-å®éªŒä»£ç è¯¦è§£.md](07-å®éªŒä»£ç è¯¦è§£.md) - åˆ†æpmtest1å’Œpmtest5
