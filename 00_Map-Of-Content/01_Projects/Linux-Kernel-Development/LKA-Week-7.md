---
tags:
  - Knowledge/Operating-Systems/Linux
  - Knowledge/Operating-Systems
created: 2025-10-20
author:
  - ln1
status: In Progress
---
## 转移控制(control transfer)
- 调用者(Caller)
- 被调用者(Callee)
- Control:指令执行的顺序
- Transfer:变化
- 在将控制(Control)从一个代码**转移(Transfer)** 到另一个代码段之前，**目标代码段**的段选择字必须被加载到CS中。
- 处理器在这个过程中会查看**目标代码段**的段描述符，对其**界限**、**类型**和**特权级**进行检查。如果没有错误发生，**CS寄存器会被加载**。
- 目的操作数
- 发生了**栈切换**：避免高特权级的栈空间被滥用导致栈空间不足而崩溃，以及低特权级的程序非法修改或者干扰高特权级程序的栈内容。
- 调用者和非调用者普遍使用不同的栈。不同的特权级有不同的栈。
### TSS:
**TSS（Task-State Segment，任务状态段）** 是 x86 保护模式下的一种特殊数据结构，用于保存任务（进程）在不同特权级下的栈信息及部分寄存器状态。当发生任务切换或跨特权级调用时，CPU 通过 TSS 获取目标特权级的栈指针等信息，从而实现安全的栈切换与任务管理。![[Pasted image 20251020104808.png]]
- PDBR:页目录基址寄存器（Page Directory Base Register）
- 下面的这些寄存器命名的位置是为了在进程未运行时保存的寄存器的位置。处理器上下文。
- 从低到高用：CALL
- 从高到低用：RETURN
- 段内，段没有发生变化，段内转移，短调用，短转移。段内段间。
- DPL：描述符特权级
- 栈的作用：
	1. 保存**调用者**的上下文现场
	2. 保存需要**传递的参数**
