---
tags:
  - Knowledge/Computer-Network
created: 2025-09-09
author:
  - ln1
status: Done
---
## 1.什么是因特网
一个全球性的计算机网络。
### 1.1.具体构成描述
- 连接在因特网上的设备称为主机（host）或**端系统（end system）**。
- 端系统通过通信链路（communicate link）和分组交换机（packet switch）的网络连接到一起。
- 因特网服务提供商（Internet Service Provider,ISP）将端系统接入因特网，提供IP地址，如中国电信。
- 端系统、分组交换机和其他因特网部件都需要运行多个协议（protocol），协议控制因特网中信息的接送和发送，如TCP协议、IP协议。
### 1.2.服务描述
- 分布式应用（distributed application）：涉及多个相互交换数据的端系统的应用。
- 套接字接口（socket interface）：是一套发送程序**必须遵循的规则集合**，因此因特网能搞将数据交付给目的地。
### 1.3.什么是协议
	协议（protocol）定义了在两个或多个通信实体之间交换的报文的格式和顺序，以及报文的发送/接送或其他事件所采取的操作。
---
## 2.网络边缘
端系统位于因特网的边缘。
主机有时可以进一步分为两类：`客户（client）`和`服务器（server）`。
### 2.1.接入网
接入网指将端系统物理连接到其边缘路由器（edge router）的网络。
#### 1.家庭接入：DSL、电缆、FTTH和5G固定式无线
宽带住宅流行的类型：`数字用户线（Digital Subscriber Line，DSL）`和`电缆`。
- DSL：用户通过电话接入的本地电话公司（ISP）获得DSL因特网接入，每个用户的DSL调制解调器使用现有的电话线与位于电话公司的数字用户线接入复用器（DSLAM）交换数据。
- 电缆因特网接入（cable Internet access）利用了有线电视基础设施，经常被称为混合光纤同轴（Hybrid Fiber Coax，HFC）系统。
- 光纤到户（Fiber To The Home，FTTH）：提供一条从本地中心局直接到家庭的光纤路径。
	- 有源光纤网络（Active Optical Network，AON）：本质上是交换以太网。
	- 无源光纤网络（Passive Optical Network，PON）：多个光纤网络端接器（Optical Network Terminator，ONT）通过邻近的光纤分配器（spliter）连接到一根共享的光纤，该光纤再连接到中心局的光纤线路端接器（Optical Line Terminator，OLT）。
	![[Pasted image 20250909151921.png]]
- 5G固定式无线：高速住宅接入且**没有安装成本**，并且不需要搭建易于产生故障的布线系统。数据以无线的方式从供应商的基站发送到家中的调制解调器。
#### 2.企业（和家庭）接入：以太网和WIFI
普遍使用局域网（LAN）将端系统连接到边缘路由器，其中以太网是流行的接入技术。
- 多个以太网用户使用双绞铜线与一台以太网交换机相连，以太网交换机或以这种方式相连的交换机网络，则与更大的因特网相连。
- WIFI：无线LAN接入。
#### 3.广域无线接入：3G、LTE 4G和5G
与WIFI不同的是，用户仅需位于距离基站数万米（而不是几十米）的范围内。

### 2.2.物理媒介
分类两类：`导引型媒介（guided media）`和`非导引型媒介（unguided media）`。
- 对于导引型媒介，电波沿着固体媒介前行，如光缆、双绞铜线或同轴电缆。
- 对于非导引型媒介，电波在空气或外层空间中传播，例如在无线局域网或数字卫星频道中传播。
#### 1.双绞铜线
两根铜线被**绞合**起来，以**减少**邻近类似的双绞线的**电气干扰**。无屏蔽双绞线（Unshielded Twisted Pair，UTP）常用在局域网。
#### 2.同轴电缆
同双绞线类似，但是两根导体是同心的而不是并行的。能够达到**较高的数据传输速度**。
#### 3.光纤
- 支持极高的比例速率。
- 不受电磁干扰。
- 信号衰减极低。
- 但成本较高。
OC-n:链路速率等于n x  51.8Mbps。
#### 4.陆地无线电信道
无线电信道用电磁频谱承载信号，它不需要安装物理线路，可以穿透墙壁、提供与移动用户的连接及长距离承载信号的能力。其特性**依赖于传播环境和信号传输的距离**。

分为三类：
1. 运行在很短距离（1m或2m）；
2. 运行在局部，通常几十米到几百米；
3. 运行在广域，跨越数万米；
#### 5.卫星无线电信道
通常使用两类卫星：`同步卫星`和`近地轨道卫星`。

---
## 3.网络核心
路由器以及交换机的链路结构，功能：
1. 信息转发
2. 路径选择
通过网络链路和交换机移动数据有两种基本方法：电路交换（circuit switching）和分组交换（packet switching）。
### 3.1.分组交换
- 端系统彼此交换报文（message）。
- 将长报文**划分为较小的分组**（packet）。
- 每个分组通过通信链路和分组交换机（packet switch）传送。
分组交换机（packet switch）分为：路由器（router）和链路层交换机（link-layer switch）。
#### 1.存储转发传输
在交换机开始向输出链路传输该分组的第一个比特之前，必须接收到整个分组。
#### 2.排队时延和分组丢失
- 每台分组交换机有多条链路与之相连，用于一个输出缓存（output buffer）或输出队列（output queue），用于存储路由器准备发往那条链路的分组。
- 当链路忙于传输其他分组，则需要在缓存中等待，从而造成了排队时延（queuing delay）。
- 又因为缓存大小有限，缓存空间满，则会出现分组丢失（丢包）（packet loss）。
#### 3.转发表和路由选择协议
每台路由器具有一个转发表（forwarding table），用于将目的地址（或目的地址的一部分）映射为输出链路。因特网具有一些特殊的路由选择协议（routing protocol），用于自动地设置这些转发表。
### 3.2.电路交换
创建专用的端到端连接（end-to-end connection），能够以确保的恒定速度向接收放传输数据。
#### 1.电路交换网络中的复用：
主要是通过`频分复用（Frequency-Divison Multiplexing，FDM)`或`时分复用（Time-Division Multiplexing，TDM）`来实现的。
#### 2.分组交换与电路交换的对比
- 分组交换在某种程度上**不适合实时服务**：它的端到端时延是**可变**的和**不可预测**的。
- 分组交换提供了比电路交换**更好的带宽共享**，更**简单**、更**有效**，成本更低。
- 分组交换的**性能优**于电路交换的性能。
- 电路交换预先分配了传输链路，导致已分配而并不需要的链路时间未被利用。
- 分组交换按需分配链路，链路传输能力将在所有需要在链路上传输分组的用户之间逐分组地被共享。
### 3.3.网络的网络
- 全球传输ISP之间必须是互联的；
- 每个区域ISP（regional ISP）与第一层ISP（tier-1 ISP）连接。
- 存在点（Point of Presence，PoP）：存在于等级结构的所有层次，但底层（接入ISP）等级除外，只是提供商网络中的一台或多台路由器群组，其中客户ISP能够与提供商ISP连接。
- 多宿（multi-home）：可以与两个或更多提供商ISP连接）。
- 对等（peer）：
	- 位于相同等级结构层次的邻近的一对ISP可以对等
	- 它们之间的所有流量经直接连接而不是通过上游的中间ISP传输
	- 两个ISP对等时，通常不进行结算，任何一个ISP都不向其对等付费
- 因特网交换点（Internet Exchange Point，IXP），IXP是一个汇合点，多个ISP更够在这里一起对等。
- 内容提供商网络（content provider network）：通过创建自己的网络，内容提供商不仅减少了向顶层ISP支付的费用，而且对其服务最终如何交付给端用户有了更多的控制。
![[Pasted image 20250909151350.png]]
---
## 4.分组交换网中的时延、丢包和吞吐量
### 4.1.分组交换网中的时延
#### 时延的类型：
1. **处理时延(nodal processing delay)**:检查分组首部和决定将该分组导向何处所需要的时间、检查比特级的差错所需要的时间等。
2. **排队时延(queuing delay)**:在队列上，当分组在链路上等待传输时，将经受排队时延。
3. **传输时延(transmission delay)**:将所有分组的比特推向链路（即传输，说着说发射)，L代表分组的长度，R表示从路由器A到路由器B的链路传输速率，则传输时延是(L/R)。
4. **传播时延(propagation delay)**:从该链路的起点到路由器传播所需要的时间是传播时延，其传播速率取决于该链路的物理媒介。
5. 节点总时延(total nodal delay):![[Pasted image 20250916114042.png]]
### 4.2.排队时延和丢包
#### 排队时延：
- 当表征排队时延时，人们通常用统计量来度量。
- a表示分组到达队列的平均速率(a的单位是分组/秒，即pkt/s)，R是传输速率，假设所有分组都是L bit组成的，则比特到达队列的平均速率是La bps，比率La/R被称为流量强度(traffic intensity)。
	- 如果La/R>1,则比特到达队列的平均速率超过从该队列传输出去的速率，队列趋向于无限增加，而且排队时延将趋向无穷大， 因此设计系统时流量强度不能大于1。
	- 如果流量强度接近0，平均排队时延将接近0；随着流量强度接近1，平均排队长度变得越来越长。
![[Pasted image 20250916153000.png]]
#### 丢包：
- 当排队队列变满，由于没有地方再存储额外的分组，路由器将丢弃(drop)该分组，即该分组会丢失(lost)。
- 分组丢失的比例随着流量强度的增加而增加。
### 4.3.端到端时延
![[Pasted image 20250916153301.png]]
### 4.4.计算机网络中的吞吐量
瞬时吞吐量(instantaneous throughput)是主机在任何时间下接收到文件的速率(以bps计)。
如果文件大小以F bit组成，主机接收用去T s，则
	文件的平均吞吐量(average throughput)是F/T bps。
瓶颈链路(bottleneck link)：
- 对简单的两链路网路，其吞吐量是min{Rc,Rs}。
- 对于从核心角度来看的N条链路：其吞吐量是min{R1,R2,R3,R4...}。
- 因特网的核心超量配置了高速率的链路，从而很少出现拥塞。
- 目前因特网中对吞吐量的限制因素通常还是接入网，吞吐量=min{Rs,Rc}。
--- 
## 5.协议层次及其服务模型
### 5.1.分层的体系结构
只要该层对其上面的层提供相同的服务，并且使用来自下面的相同服务，当某层的实现变化时，该系统的其余部分就可以保持不变。
#### 协议分层：
- 网络设计者以**分层**(layer)的方式组织并实现了协议的网络硬件和软件。
- 下层向它的上一层提供服务(service)，即一层的服务模型(service model)。
- 每层通过在该层中执行某些操作或使用直接下层的服务来提供服务。
具有概念化和结构化的特点。
- 模块化使更新组件更为容易。
- 分层的一个潜在缺点是一层可能冗余较低层的功能。
各层的所有协议被称为协议栈(protocol stack)。
![[Pasted image 20250916154805.png]]
##### 1.应用层：
- 应用层是网络应用程序及它们的应用层协议留存的地方。
- 例如HTTP（提供了Web文档的请求和传输）、SMTP（提供了电子邮件报文的传输）、FTP（提供两个端之间文件传送）。
- 位于应用层的信息分组称为报文（message）。
##### 2.运输层：
- 运输层在应用程序端点之间传送应用层报文。
- 例如TCP和UDP:
	- TCP提供面向连接的服务。确保应用层报文向目的地传递和流量控制(发送方/接收方速率匹配)，TCP将长报文划分为短报文，并题库拥塞控制机制。
	- UDP提供面向无连接服务。没有可靠性、没有流量控制、没有拥塞控制。
- 位于运输层的信息分组称为报文段(segment)。
##### 3.网络层：
- 负责将称为数据报(datagram)的网络层分组从一台主机移动到另一台主机。
- 例如网际协议（IP）。
##### 4.链路层：
- 为了将分组从一个节点（主机或路由器）移动到路径的下一个节点，网络层必须依靠链路层的服务。
- 例如以太网、WiFi和电缆接入网的DOCSIS协议；
- 位于链路层的信息分组称为帧(frame)。
##### 5.物理层：
- 将帧中的一个个比特从一个节点移动到下一个节点。
- 与实际传输媒介相关：双绞铜线、单模光纤等。
### 5.2.封装(encapsulation)：
![[Pasted image 20250916160438.png]]
## 6.面对攻击的网络：
### 6.1.恶意软件(malware)可能被放入计算机中
- 僵尸网络(botnet)：利用僵尸网络控制并有效地对目标主机展开垃圾邮件分发或分布式拒绝服务攻击。
- 恶意软件大都具有自我复制(selt-replicating)的能力。
### 6.2.服务器和网络基础设施可以被攻击
拒绝服务攻击(Denial-of-Service(DoS) attack)：使得网络、主机或其他基础设施部分不能由合法用户使用。
- 弱点攻击。
- 带宽洪泛。
- 连接洪泛。
分布式DoS（Distributed DoS，DDos）：攻击者控制多个源并让每个源向目标发送流量。
### 6.3.分组嗅探器(packet sniffer)
可以嗅探分组，收集信息。
### 6.4.可以伪装成信任的人：
IP哄骗(IP spoofing)：将具有虚假源地址的分组注入因特网的能力。
> 在相互信任的用户之间的通信是一种例外而不是规则。欢迎来到现代计算机网络世界！

## 7.计算机网络和因特网的历史
### 7.1.分组交换的发展:1962-1972

### 7.2.专用网络和网络互联：1972-1980

### 7.3.网络的激增：1980-1990

### 7.4.因特网爆炸：20世纪90年代
万维网(Wrold Wide Web)应用程序出现。
- 电子邮件
- Web
- 即时通信(instant messaging)
- MPS的对等(peer-to-peer)文件共享。
## 8.小结
自顶向下：一旦理解应用程序，就能理解支持这些应用程序所需的各种网络服务，然后能够依次研究可能由网络体系结构实现的服务的各种方式，而且能够为学习剩余部分提供动力。
