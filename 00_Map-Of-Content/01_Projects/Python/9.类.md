## 9.1 创建和使用类

### 基本类定义
```python
class Dog:
    """一次模拟小狗的简单尝试"""
    
    def __init__(self, name, age):
        """初始化属性name和age"""
        self.name = name
        self.age = age
    
    def sit(self):
        """模拟小狗蹲下"""
        print(f"{self.name} is now sitting.")
    
    def roll_over(self):
        """模拟小狗打滚"""
        print(f"{self.name} rolled over!")

# 创建实例
my_dog = Dog('Willie', 6)
print(f"My dog's name is {my_dog.name}.")
print(f"My dog is {my_dog.age} years old.")
my_dog.sit()
my_dog.roll_over()
```

## 9.2 使用类和实例

### 修改属性值
```python
class Car:
    """一次模拟汽车的简单尝试"""
    
    def __init__(self, make, model, year):
        """初始化描述汽车的属性"""
        self.make = make
        self.model = model
        self.year = year
        self.odometer_reading = 0  # 默认值
    
    def get_descriptive_name(self):
        """返回格式规范的描述性名称"""
        long_name = f"{self.year} {self.make} {self.model}"
        return long_name.title()
    
    def read_odometer(self):
        """打印汽车的里程"""
        print(f"This car has {self.odometer_reading} miles on it.")
    
    def update_odometer(self, mileage):
        """将里程表读数设置为指定的值"""
        if mileage >= self.odometer_reading:
            self.odometer_reading = mileage
        else:
            print("You can't roll back an odometer!")
    
    def increment_odometer(self, miles):
        """将里程表读数增加指定的量"""
        self.odometer_reading += miles

my_new_car = Car('audi', 'a4', 2024)
print(my_new_car.get_descriptive_name())

# 三种修改属性的方式
# 1. 直接修改
my_new_car.odometer_reading = 23
my_new_car.read_odometer()

# 2. 通过方法修改
my_new_car.update_odometer(50)
my_new_car.read_odometer()

# 3. 通过方法递增
my_new_car.increment_odometer(100)
my_new_car.read_odometer()
```

## 9.3 继承

### 子类继承父类
```python
class ElectricCar(Car):
    """电动汽车的独特之处"""
    
    def __init__(self, make, model, year):
        """初始化父类的属性"""
        super().__init__(make, model, year)
        self.battery_size = 75  # 子类特有属性
    
    def describe_battery(self):
        """打印电池容量"""
        print(f"This car has a {self.battery_size}-kWh battery.")

my_tesla = ElectricCar('tesla', 'model s', 2024)
print(my_tesla.get_descriptive_name())
my_tesla.describe_battery()
```

### 重写父类方法
```python
class ElectricCar(Car):
    
    def __init__(self, make, model, year):
        super().__init__(make, model, year)
        self.battery_size = 75
    
    def fill_gas_tank(self):
        """电动汽车没有油箱"""
        print("This car doesn't need a gas tank!")
```

### 将实例用作属性
```python
class Battery:
    """模拟电动汽车电池的简单尝试"""
    
    def __init__(self, battery_size=75):
        """初始化电池的属性"""
        self.battery_size = battery_size
    
    def describe_battery(self):
        """打印电池容量"""
        print(f"This car has a {self.battery_size}-kWh battery.")
    
    def get_range(self):
        """打印电池续航里程"""
        if self.battery_size == 75:
            range = 260
        elif self.battery_size == 100:
            range = 315
        
        print(f"This car can go about {range} miles on a full charge.")

class ElectricCar(Car):
    
    def __init__(self, make, model, year):
        super().__init__(make, model, year)
        self.battery = Battery()  # 组合：将实例用作属性

my_tesla = ElectricCar('tesla', 'model s', 2024)
print(my_tesla.get_descriptive_name())
my_tesla.battery.describe_battery()
my_tesla.battery.get_range()
```

## 9.4 导入类

### 导入单个类
```python
# car.py
class Car:
    # ... 类定义 ...

# my_car.py
from car import Car

my_new_car = Car('audi', 'a4', 2024)
```

### 导入多个类
```python
from car import Car, ElectricCar

my_beetle = Car('volkswagen', 'beetle', 2024)
my_tesla = ElectricCar('tesla', 'roadster', 2024)
```

### 导入整个模块
```python
import car

my_beetle = car.Car('volkswagen', 'beetle', 2024)
my_tesla = car.ElectricCar('tesla', 'roadster', 2024)
```

### 导入模块中的所有类
```python
from car import *
```

## 9.5 Python标准库

```python
# 使用OrderedDict
from collections import OrderedDict

favorite_languages = OrderedDict()
favorite_languages['jen'] = 'python'
favorite_languages['sarah'] = 'c'
favorite_languages['edward'] = 'ruby'
favorite_languages['phil'] = 'python'

for name, language in favorite_languages.items():
    print(f"{name.title()}'s favorite language is {language.title()}.")
```

## 核心概念总结

- **类**：根据约定，类名采用驼峰命名法（首字母大写）
- **__init__()**：类的构造函数，创建实例时自动运行
- **self**：指向实例本身，让实例能访问类中的属性和方法
- **实例属性**：通过 self.属性名 定义
- **继承**：子类继承父类的所有属性和方法
- **super()**：调用父类的方法
- **组合**：将类的实例作为另一个类的属性
- **方法重写**：子类中定义与父类同名的方法

## 常见实践

```python
# 完整示例
class Restaurant:
    """餐馆类"""
    
    def __init__(self, restaurant_name, cuisine_type):
        self.restaurant_name = restaurant_name
        self.cuisine_type = cuisine_type
        self.number_served = 0
    
    def describe_restaurant(self):
        print(f"{self.restaurant_name} serves {self.cuisine_type}.")
    
    def open_restaurant(self):
        print(f"{self.restaurant_name} is open!")
    
    def set_number_served(self, number):
        self.number_served = number
    
    def increment_number_served(self, number):
        self.number_served += number

class IceCreamStand(Restaurant):
    """冰淇淋店"""
    
    def __init__(self, restaurant_name, cuisine_type='ice cream'):
        super().__init__(restaurant_name, cuisine_type)
        self.flavors = []
    
    def show_flavors(self):
        print("\nAvailable flavors:")
        for flavor in self.flavors:
            print(f"- {flavor}")

# 使用
big_one = IceCreamStand('The Big One')
big_one.flavors = ['vanilla', 'chocolate', 'strawberry']
big_one.describe_restaurant()
big_one.show_flavors()
```
