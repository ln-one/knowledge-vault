# 计算机图形学公式速查表

> **考试必备：所有重要数学公式的LaTeX格式汇总**
> 
> 参考来源：课程PPT及历年真题

---

## 快速索引

| 章节 | 公式类型 | 考试分值 | 页内跳转 |
|------|----------|----------|----------|
| 第三章 | 直线生成算法 | 12分 | [直线算法](#1-直线生成算法) |
| 第三章 | 圆弧生成算法 | 12分 | [圆弧算法](#2-圆和圆弧生成算法) |
| 第三章 | 区域填充算法 | 6分 | [填充算法](#7-区域填充算法) |
| 第四章 | Bezier曲线 | 6分 | [Bezier曲线](#3-曲线生成算法) |
| 第四章 | B样条曲线 | 6分 | [B样条曲线](#3-曲线生成算法) |
| 第五章 | 矢量运算 | 6分 | [矢量运算](#5-矢量运算) |
| 第五章 | 图形变换 | 6分 | [图形变换](#4-图形变换) |
| 第六章 | 裁剪算法 | 12分 | [裁剪算法](#6-裁剪算法) |
| 第二章 | 帧缓冲计算 | 5分 | [帧缓冲](#8-帧缓冲存储器容量计算) |

---

## 1. 直线生成算法

### 1.1 DDA算法

**斜率计算：**
$$m = \frac{\Delta y}{\Delta x} = \frac{y_2 - y_1}{x_2 - x_1}$$

**增量计算公式：**

| 条件 | x增量 | y增量 |
|------|-------|-------|
| $\|m\| \leq 1$ | $x_{i+1} = x_i + 1$ | $y_{i+1} = y_i + m$ |
| $\|m\| > 1$ | $x_{i+1} = x_i + \frac{1}{m}$ | $y_{i+1} = y_i + 1$ |

**适用条件：** 所有斜率的直线，但需要浮点运算

---

### 1.2 中点画线法

**直线隐式方程：**
$$F(x,y) = ax + by + c = 0$$

**参数定义：**
- $a = y_1 - y_2$
- $b = x_2 - x_1$
- $c = x_1y_2 - x_2y_1$

**初始决策参数：**
$$d_0 = 2a + b = 2\Delta y - \Delta x$$

**决策规则（$0 < m < 1$时）：**

| 条件 | 选择像素 | 增量更新 |
|------|----------|----------|
| $d < 0$ | 右上方 $(x_p+1, y_p+1)$ | $d_{i+1} = d_i + 2a + 2b = d_i + 2(\Delta y - \Delta x)$ |
| $d \geq 0$ | 右方 $(x_p+1, y_p)$ | $d_{i+1} = d_i + 2a = d_i + 2\Delta y$ |

**注意：** 当 $a < 0$（即 $\Delta y > 0$）时，$d < 0$ 选择上方像素

---

### 1.3 Bresenham算法

**情况1：$|m| \leq 1$（x为主方向）**

| 参数 | 公式 |
|------|------|
| 初始误差项 | $e_0 = 2\Delta y - \Delta x$ |
| $e < 0$ 时 | y不变，$e_{new} = e + 2\Delta y$ |
| $e \geq 0$ 时 | y+1，$e_{new} = e + 2\Delta y - 2\Delta x$ |

**情况2：$|m| > 1$（y为主方向）**

| 参数 | 公式 |
|------|------|
| 初始误差项 | $e_0 = 2\Delta x - \Delta y$ |
| $e < 0$ 时 | x不变，$e_{new} = e + 2\Delta x$ |
| $e \geq 0$ 时 | x+1，$e_{new} = e + 2\Delta x - 2\Delta y$ |

---

## 2. 圆和圆弧生成算法

### 2.1 圆的参数方程

$$x = x_c + r\cos\theta$$
$$y = y_c + r\sin\theta$$

### 2.2 圆的隐式方程

$$F(x,y) = x^2 + y^2 - r^2 = 0$$

**方程性质：**
- $F(x,y) = 0$：点在圆上
- $F(x,y) < 0$：点在圆内
- $F(x,y) > 0$：点在圆外

### 2.3 中点画圆法

| 参数 | 公式 |
|------|------|
| 初始决策参数 | $d_0 = 1 - r$ |
| $d < 0$ 时（选E点） | $d_{i+1} = d_i + 2x_i + 3$ |
| $d \geq 0$ 时（选SE点） | $d_{i+1} = d_i + 2x_i - 2y_i + 5$ |

**八对称性：** 只需计算第一八分圆（$0 \leq x \leq y$），其余通过对称得到

**八个对称点：**
$(x, y)$, $(-x, y)$, $(x, -y)$, $(-x, -y)$, $(y, x)$, $(-y, x)$, $(y, -x)$, $(-y, -x)$

### 2.4 Bresenham画圆法

| 参数 | 公式 |
|------|------|
| 初始决策参数 | $p_0 = 3 - 2r$ |
| $p < 0$ 时（选H点） | $p_{new} = p + 4x + 6$ |
| $p \geq 0$ 时（选D点） | $p_{new} = p + 4(x - y) + 10$ |

---

## 3. 曲线生成算法

### 3.1 Bezier曲线

**n次Bezier曲线参数方程：**
$$P(t) = \sum_{i=0}^{n} P_i \cdot B_{i,n}(t), \quad t \in [0,1]$$

**Bernstein基函数：**
$$B_{i,n}(t) = C_n^i t^i (1-t)^{n-i}$$

其中组合数 $C_n^i = \frac{n!}{i!(n-i)!}$

**二次Bezier曲线（n=2）：**
$$P(t) = (1-t)^2 P_0 + 2t(1-t) P_1 + t^2 P_2$$

**三次Bezier曲线（n=3）：**
$$P(t) = (1-t)^3 P_0 + 3t(1-t)^2 P_1 + 3t^2(1-t) P_2 + t^3 P_3$$

**端点性质：**
- $P(0) = P_0$，$P(1) = P_n$
- $P'(0) = n(P_1 - P_0)$（起点切矢量）
- $P'(1) = n(P_n - P_{n-1})$（终点切矢量）

**de Casteljau递推算法：**
$$P_i^r = (1-t)P_i^{r-1} + tP_{i+1}^{r-1}$$

其中 $r = 1, 2, ..., n$，$i = 0, 1, ..., n-r$

---

### 3.2 三次B样条曲线

**矩阵形式：**
$$P(t) = \frac{1}{6} \begin{bmatrix} 1 & t & t^2 & t^3 \end{bmatrix} \begin{bmatrix} 1 & 4 & 1 & 0 \\ -3 & 0 & 3 & 0 \\ 3 & -6 & 3 & 0 \\ -1 & 3 & -3 & 1 \end{bmatrix} \begin{bmatrix} P_0 \\ P_1 \\ P_2 \\ P_3 \end{bmatrix}$$

**基函数形式：**
- $B_{0,4}(t) = \frac{1}{6}(1-t)^3$
- $B_{1,4}(t) = \frac{1}{6}(3t^3 - 6t^2 + 4)$
- $B_{2,4}(t) = \frac{1}{6}(-3t^3 + 3t^2 + 3t + 1)$
- $B_{3,4}(t) = \frac{1}{6}t^3$

**端点公式：**
- $P(0) = \frac{1}{6}(P_0 + 4P_1 + P_2)$
- $P(1) = \frac{1}{6}(P_1 + 4P_2 + P_3)$

**端点切矢量：**
- $P'(0) = \frac{1}{2}(P_2 - P_0)$
- $P'(1) = \frac{1}{2}(P_3 - P_1)$

---

### 3.3 二次B样条曲线（k=3）

**基函数：**
- $B_{0,3}(t) = \frac{1}{2}(1-t)^2$
- $B_{1,3}(t) = \frac{1}{2}(-2t^2 + 2t + 1)$
- $B_{2,3}(t) = \frac{1}{2}t^2$

**端点性质：**
- $P(0) = \frac{1}{2}(P_0 + P_1)$
- $P(1) = \frac{1}{2}(P_1 + P_2)$

---

### 3.4 Bezier曲线拼接条件

| 连续性 | 条件 |
|--------|------|
| $G^0$连续 | $Q_m = P_0$ |
| $G^1$连续 | $Q_m - Q_{m-1} = \alpha(P_1 - P_0)$，$\alpha > 0$（三点共线） |
| $G^2$连续 | 曲率连续 |

---

### 3.5 曲面公式

**双参数Bezier曲面：**
$$P(u, v) = \sum_{i=0}^{m} \sum_{j=0}^{n} P_{i,j} B_{i,m}(u) B_{j,n}(v), \quad u, v \in [0, 1]$$

**B样条曲面：**
$$P(u, v) = \sum_{i=0}^{m} \sum_{j=0}^{n} P_{i,j} B_{i,k}(u) B_{j,l}(v)$$

---

## 4. 图形变换

### 4.1 二维基本变换矩阵（齐次坐标）

**平移变换：**
$$T(t_x, t_y) = \begin{bmatrix} 1 & 0 & 0 \\ 0 & 1 & 0 \\ t_x & t_y & 1 \end{bmatrix}$$

**缩放变换：**
$$S(s_x, s_y) = \begin{bmatrix} s_x & 0 & 0 \\ 0 & s_y & 0 \\ 0 & 0 & 1 \end{bmatrix}$$

**旋转变换（逆时针）：**
$$R(\theta) = \begin{bmatrix} \cos\theta & \sin\theta & 0 \\ -\sin\theta & \cos\theta & 0 \\ 0 & 0 & 1 \end{bmatrix}$$

---

### 4.2 三维基本变换矩阵

**平移变换：**
$$T(t_x, t_y, t_z) = \begin{bmatrix} 1 & 0 & 0 & 0 \\ 0 & 1 & 0 & 0 \\ 0 & 0 & 1 & 0 \\ t_x & t_y & t_z & 1 \end{bmatrix}$$

**绕X轴旋转：**
$$R_x(\theta) = \begin{bmatrix} 1 & 0 & 0 & 0 \\ 0 & \cos\theta & \sin\theta & 0 \\ 0 & -\sin\theta & \cos\theta & 0 \\ 0 & 0 & 0 & 1 \end{bmatrix}$$

**绕Y轴旋转：**
$$R_y(\theta) = \begin{bmatrix} \cos\theta & 0 & -\sin\theta & 0 \\ 0 & 1 & 0 & 0 \\ \sin\theta & 0 & \cos\theta & 0 \\ 0 & 0 & 0 & 1 \end{bmatrix}$$

**绕Z轴旋转：**
$$R_z(\theta) = \begin{bmatrix} \cos\theta & \sin\theta & 0 & 0 \\ -\sin\theta & \cos\theta & 0 & 0 \\ 0 & 0 & 1 & 0 \\ 0 & 0 & 0 & 1 \end{bmatrix}$$

---

### 4.3 复合变换

**变换矩阵乘法（从左向右）：**
$$[x', y', 1] = [x, y, 1] \cdot T_1 \cdot T_2 \cdot ... \cdot T_n$$

**绕任意点$(x_c, y_c)$旋转：**
$$T = T(-x_c, -y_c) \cdot R(\theta) \cdot T(x_c, y_c)$$

**绕任意点$(x_f, y_f)$缩放：**
$$T = T(-x_f, -y_f) \cdot S(s_x, s_y) \cdot T(x_f, y_f)$$

---

### 4.4 投影变换

**一点透视投影（投影中心在z轴负方向距离d处）：**
$$x' = \frac{x}{1 + z/d}, \quad y' = \frac{y}{1 + z/d}$$

**透视投影矩阵：**
$$T_r = \begin{bmatrix} 1 & 0 & 0 & 0 \\ 0 & 1 & 0 & 0 \\ 0 & 0 & 1 & r \\ 0 & 0 & 0 & 1 \end{bmatrix}$$

其中 $r = -1/d$

**正交投影（三视图）：**

主视图（xOz平面）：
$$T_v = \begin{bmatrix} 1 & 0 & 0 & 0 \\ 0 & 0 & 0 & 0 \\ 0 & 0 & 1 & 0 \\ 0 & 0 & 0 & 1 \end{bmatrix}$$

---

## 5. 矢量运算

### 5.1 基本运算

**点积（内积）：**
$$\vec{u} \cdot \vec{v} = u_x v_x + u_y v_y + u_z v_z = |\vec{u}||\vec{v}|\cos\theta$$

**叉积（外积）：**
$$\vec{u} \times \vec{v} = \begin{vmatrix} \vec{i} & \vec{j} & \vec{k} \\ u_x & u_y & u_z \\ v_x & v_y & v_z \end{vmatrix} = (u_y v_z - u_z v_y, u_z v_x - u_x v_z, u_x v_y - u_y v_x)$$

**矢量长度：**
$$|\vec{u}| = \sqrt{u_x^2 + u_y^2 + u_z^2}$$

**夹角余弦：**
$$\cos\theta = \frac{\vec{u} \cdot \vec{v}}{|\vec{u}||\vec{v}|}$$

**单位化：**
$$\hat{u} = \frac{\vec{u}}{|\vec{u}|}$$

---

### 5.2 应用公式

**平面法向量（三点确定）：**
$$\vec{n} = (\vec{P_2} - \vec{P_1}) \times (\vec{P_3} - \vec{P_1})$$

**三角形面积：**
$$S = \frac{1}{2}|(\vec{AB}) \times (\vec{AC})|$$

**投影长度：**
$$proj_{\vec{b}}\vec{a} = \frac{\vec{a} \cdot \vec{b}}{|\vec{b}|}$$

---

## 6. 裁剪算法

### 6.1 Cohen-Sutherland算法

**区域编码（4位：上下右左）：**

| 位 | 条件 | 编码 |
|----|------|------|
| 上 | $y > y_{max}$ | 1000 |
| 下 | $y < y_{min}$ | 0100 |
| 右 | $x > x_{max}$ | 0010 |
| 左 | $x < x_{min}$ | 0001 |

**判断规则：**
- 若 $code_1 \text{ OR } code_2 = 0000$：完全在窗口内
- 若 $code_1 \text{ AND } code_2 \neq 0000$：完全在窗口外

**求交公式：**

与左边界 $x = x_{min}$：
$$y = y_1 + \frac{y_2 - y_1}{x_2 - x_1}(x_{min} - x_1)$$

与下边界 $y = y_{min}$：
$$x = x_1 + \frac{x_2 - x_1}{y_2 - y_1}(y_{min} - y_1)$$

---

### 6.2 Liang-Barsky算法

**参数方程：**
$$x = x_1 + t \cdot \Delta x, \quad y = y_1 + t \cdot \Delta y$$

**参数定义：**

| k | 边界 | $p_k$ | $q_k$ |
|---|------|-------|-------|
| 1 | 左 | $-\Delta x$ | $x_1 - x_{min}$ |
| 2 | 右 | $\Delta x$ | $x_{max} - x_1$ |
| 3 | 下 | $-\Delta y$ | $y_1 - y_{min}$ |
| 4 | 上 | $\Delta y$ | $y_{max} - y_1$ |

**参数计算：**
$$t_k = \frac{q_k}{p_k}$$

**裁剪条件：**
- 当 $p_k < 0$：从外到内，取 $t_{入} = \max(t_k)$
- 当 $p_k > 0$：从内到外，取 $t_{出} = \min(t_k)$
- 若 $t_{入} > t_{出}$：线段完全在窗口外

---

### 6.3 Sutherland-Hodgman多边形裁剪

**单边裁剪规则：**

| 情况 | $P_i$ 位置 | $P_{i+1}$ 位置 | 输出 |
|------|-----------|---------------|------|
| (a) | 内侧 | 内侧 | $P_{i+1}$ |
| (b) | 外侧 | 外侧 | 无 |
| (c) | 内侧 | 外侧 | 交点 $I$ |
| (d) | 外侧 | 内侧 | 交点 $I$ 和 $P_{i+1}$ |

---

## 7. 区域填充算法

### 7.1 扫描线填充

**交点计算：**
对于边 $(x_1, y_1)$ 到 $(x_2, y_2)$，与扫描线 $y = y_s$ 的交点：
$$x = x_1 + \frac{(y_s - y_1)(x_2 - x_1)}{y_2 - y_1}$$

**增量计算：**
$$\Delta x = \frac{1}{k} = \frac{x_2 - x_1}{y_2 - y_1}$$

### 7.2 点在多边形内的判断（射线法）

从点向右发射线，统计与多边形边的交点数：
- 交点数为奇数：点在多边形内
- 交点数为偶数：点在多边形外

---

## 8. 帧缓冲存储器容量计算

**基本公式：**
$$V \geq M \times N \times \log_2 K \text{ (bits)}$$

其中：
- $M \times N$：显示器分辨率
- $K$：可显示的颜色个数
- $V$：帧缓冲存储器容量

**常用颜色深度：**

| 颜色深度 | 颜色数量 |
|----------|----------|
| 8位色 | $2^8 = 256$ 种 |
| 16位色 | $2^{16} = 65536$ 种 |
| 24位真彩色 | $2^{24} = 16777216$ 种 |

**带宽计算：**
$$T \geq M \times N \times F$$

其中 $F$ 为刷新频率

---

## 9. 欧拉公式

**简单多面体：**
$$V - E + F = 2$$

**广义欧拉公式（带孔洞）：**
$$V - E + F - R = 2(S - H)$$

其中：
- $V$：顶点数
- $E$：边数
- $F$：面数
- $R$：内孔数
- $S$：分离体数
- $H$：贯穿孔洞数

---

## 10. 考试常用数值

### 10.1 三角函数值

| 角度 | $\sin$ | $\cos$ |
|------|--------|--------|
| 0° | 0 | 1 |
| 30° | 0.5 | $\frac{\sqrt{3}}{2} \approx 0.866$ |
| 45° | $\frac{\sqrt{2}}{2} \approx 0.707$ | $\frac{\sqrt{2}}{2} \approx 0.707$ |
| 60° | $\frac{\sqrt{3}}{2} \approx 0.866$ | 0.5 |
| 90° | 1 | 0 |

### 10.2 常用平方根

| 数值 | 近似值 |
|------|--------|
| $\sqrt{2}$ | 1.414 |
| $\sqrt{3}$ | 1.732 |
| $\sqrt{5}$ | 2.236 |

---

## 11. 算法公式速记表

### 直线算法对比

| 算法 | 初始值 | d<0时 | d≥0时 |
|------|--------|-------|-------|
| 中点画线 | $d_0=2a+b$ | $d+2a+2b$，选P₂ | $d+2a$，选P₁ |
| Bresenham(x主) | $e_0=2Δy-Δx$ | $e+2Δy$，y不变 | $e+2Δy-2Δx$，y+1 |

### 圆弧算法对比

| 算法 | 初始值 | d<0时 | d≥0时 |
|------|--------|-------|-------|
| 中点画圆 | $d_0=1-r$ | $d+2x+3$，选H | $d+2(x-y)+5$，选D |
| Bresenham画圆 | $p_0=3-2r$ | $p+4x+6$，选H | $p+4(x-y)+10$，选D |

### 曲线端点公式

| 曲线类型 | 起点 | 终点 |
|----------|------|------|
| n次Bezier | $P(0) = P_0$ | $P(1) = P_n$ |
| 三次B样条 | $P(0) = \frac{1}{6}(P_0+4P_1+P_2)$ | $P(1) = \frac{1}{6}(P_1+4P_2+P_3)$ |

### 切矢量公式

| 曲线类型 | 起点切矢量 | 终点切矢量 |
|----------|------------|------------|
| n次Bezier | $P'(0) = n(P_1 - P_0)$ | $P'(1) = n(P_n - P_{n-1})$ |
| 三次B样条 | $P'(0) = \frac{1}{2}(P_2 - P_0)$ | $P'(1) = \frac{1}{2}(P_3 - P_1)$ |

---

**使用说明：**
1. 所有公式均采用标准LaTeX格式，与课程PPT保持一致
2. 按算法类型分类组织，便于快速查找
3. 包含考试中最常用的计算公式
4. 适用条件和参数说明已在各章节详细描述
5. 快速索引可帮助定位所需公式
